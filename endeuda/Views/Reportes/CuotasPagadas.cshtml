@{
    ViewBag.Title = "Reporte Cuotas Pagadas";
}
@{
    tesoreria.Helper.Seguridad seguridad = System.Web.HttpContext.Current.Session["Seguridad"] as tesoreria.Helper.Seguridad;
}

<div class="d-sm-flex align-items-center justify-content-between">
    <h5 class="h5 mb-0 text-gray-800">Reporte </h5>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/Home/Inicio">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Inicio</li>
    </ol>
</div>
<h6 class="h6 mb-0 text-gray-800">Cuotas Pagadas</h6>
<br />

<div class="row">
    <div class="col-md-12">
        <div class="card card-outline card-info collapsed-card">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Filtros</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-2">
                            <select name="anio" class="form-control">
                                <option>--Seleccione Año Inicial--</option>
                                <option value="1">2015</option>
                                <option value="2">2016</option>
                                <option value="3">2017</option>
                                <option value="4">2018</option>
                                <option value="5">2019</option>
                                <option value="1">2021</option>
                                <option value="2">2022</option>
                                <option value="3">2023</option>
                                <option value="4">2024</option>
                                <option value="5">2025</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <select name="empresa" class="form-control">
                                <option>--Seleccione Mes Inicial--</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <select name="anio" class="form-control">
                                <option>--Seleccione Año Final--</option>
                                <option value="1">2015</option>
                                <option value="2">2016</option>
                                <option value="3">2017</option>
                                <option value="4">2018</option>
                                <option value="5">2019</option>
                                <option value="1">2021</option>
                                <option value="2">2022</option>
                                <option value="3">2023</option>
                                <option value="4">2024</option>
                                <option value="5">2025</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <select name="empresa" class="form-control">
                                <option>--Seleccione Mes Final--</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <select name="empresa" class="form-control">
                                <option>--Seleccione Estado del Pago--</option>
                                <option value="1">Tiene Comprobante</option>
                                <option value="2">No Tiene Comprobante</option>
                            </select>
                        </div>
                        <div class="col-sm-2">
                            <div class="row justify-content-end">
                                <button class="btn btn-info btn-sm " type="button" onclick="RefreshLista()"><i class="fa fa-cog"></i> Buscar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Detalle - Cuotas Pagadas desde Enero del 2018 a Diciembre 2021</h3>
                <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover dataTable dtr-inline" width="100%" id="grillaEmpresa" data-order='[[ 0, "asc" ]]'>
                        <thead class="thead-light">
                            <tr>
                                <th class="no-sort" width="3%">Item</th>
                                <th>Número Contrato</th>
                                <th>Banco</th>
                                <th>Empresa</th>
                                <th>Monto</th>
                                <th>Saldo Insoluto</th>
                                <th>Cuota</th>
                                <th>Mes</th>
                                <th>Tipo Pago</th>
                                <th>Comp. Egreso</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- DataTable with Hover -->
<script>
$(document).ready(function () {
    AbrirMenu("CuotasPagadas");
    $('#selectEmpresa').select2({
        placeholder: '---Seleccione Empresa---',
        language: "es",
        allowClear: true,
    });
    initTable();
});
function RefreshLista() {
    var table = initTable();
    table.ajax.reload(function (json) { });
}
function initTable() {
    var table = $('#grillaEmpresa').DataTable({
        "scrollX": true,
        "retrieve": true,
        'ajax': {
            "type": "POST",
            "url": '/Reportes/CuotasPagadas_Read/0',
            "data": function (d) {

            },
            "dataSrc": ""
        },
        columns: [
            { "data": "Item" },
            { "data": "NroContrato" },
            { "data": "Banco" },
            { "data": "Empresa" },
            { "data": "MontoContrato" },
            { "data": "SaldoInsoluto" },
            { "data": "Periodo" },
            { "data": "FechaPago" },
            { "data": "TipoPago" },
            { "data": "ComprobanteEgreso" }
        ]
    });

    return table;
}

</script>
